# RSync -远程同步协议

> 原文：<https://jenkov.com/tutorials/rsync/index.html>

RSync 是一种远程文件(或数据)同步协议，它使您能够*同步*存储在本地计算机上的文件和存储在远程计算机上的文件，这样在同步之后，本地和远程文件是相同的。如果本地和远程文件之间有任何差异，RSync 会检测这些差异，并只交换本地和远程计算机之间的差异(+合并指令)，这样这两个文件就可以完全相同。

## 高效的远程文件同步

如上所述，RSync 能够在不通过网络发送整个文件的情况下同步文件。

在我所做的一个实现中，除了文件中的任何新数据之外，只有相当于总文件大小的 2%的数据被交换。新数据必须一个字节一个字节地通过线路发送，但如果数据量较大，可以用 zip 压缩发送。

文件越相似，RSync 在执行同步时需要交换的数据就越少。

## 将文件的旧版本更新到新版本的有效方法

.

RSync 最明显的用例是，如果您有一个不同版本的文件的本地和远程副本，并且您希望:

*   将远程文件更新到本地版本。
*   将本地版本更新到远程版本。

由于同一个文件的两个不同版本很可能非常相似，RSync 可以相当有效地同步这两个文件。

## 可恢复的上传或下载

由于 RSync 的工作方式，它也可以用作增量下载/上传协议，允许您在多个会话中上传或下载文件。如果当前上传或下载失败，您可以稍后恢复。

如果您开始上传或下载，但中途失败，例如由于连接失败，您将拥有一个完整文件和一个部分文件。在上传的情况下，部分文件将是远程的。在下载的情况下，部分文件将位于本地。在这两种情况下，RSync 将能够检测到两个文件之间的差异，并主要交换这些差异。

显然，如果您知道这两个文件在已经上传/下载的部分 100%相同，那么从上传/下载失败的确切字节恢复上传/下载会更有效。这将节省差异检测和合并指令等。RSync 的。但是 RSync 也可以解决这个问题。

这篇 RSync 教程在不同的页面上解释了 RSync 的不同部分。这些页面是:

*   [RSync 概述](overview.html)
*   [检测文件差异](detecting-file-differences.html)
*   [校验和](checksums.html)
*   [网络协议](network-protocol.html)
*   [合并文件](merging-files.html)
*   [上传](upload.html)
*   [下载](download.html)
*   [用例](use-cases.html)

## RSync 起源

RSync 也是 unix 系统上的一个可执行程序，它实现了 RSync 协议。不过，本教程将专注于协议本身。我在本教程结尾描述的 Java 实现与 unix RSync 实现不兼容。然而，这个实现为您提供了客户端和服务器端工具，因此您不需要 unix RSync 实现来使用它。

下面是 RSync 的[原文描述。](https://rsync.samba.org/tech_report/)

这是 RSync 上的[维基百科页面。](https://en.wikipedia.org/wiki/Rsync)
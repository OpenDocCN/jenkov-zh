# 快速加载网站

> 原文：<https://jenkov.com/tutorials/responsive-mobile-friendly-web-design/fast-loading-websites.html>

移动设备往往带宽有限(虽然越来越好)，硬件容量有限。因此，网站在移动设备上的加载速度通常比在台式电脑上慢。谷歌和其他公司一再声明，如果你的网站或网络应用程序运行缓慢，你就会失去用户。网上商店也看到了同样的效果。如果购物时间太长，他们就会失去顾客。

为了给用户一个好的用户体验(从而留住你的用户)，尽可能快地加载你的网站。有几种方法可以做到这一点。我将在本文中介绍它们。

## Web 服务器上的 Zip 压缩

在您的 web 服务器上启用 Zip 压缩可能是您可以应用的最大优化。当您启用 Zip 压缩，所有的 HTML，JavaScript，CSS，SVG 文件等。以 Zip 压缩格式发送到浏览器。这将根据文件类型将文件缩小到原始文件大小的 10%到 90%。

如果您运行的是 Java web 服务器(如 Tomcat、Jetty、Glassfish、JBoss、Web Sphere、WebLogic 等)。)我写过一篇关于如何使用 GZip servlet 过滤器将 [GZip 压缩添加到 Java web 应用程序的文章。](http://tutorials.jenkov.com/java-servlets/gzip-servlet-filter.html)

## 优化图像

增加网站下载时间的一个简单方法是确保你的图片得到充分优化。如果可以的话，将你的图片保存为 JPEG 格式，并尝试压缩质量，直到你在图片的大小(以字节为单位)和视觉质量之间找到一个好的平衡点。

你也可以使用类似[http://www.jpegmini.com/](http://www.jpegmini.com/)的工具来优化你的 JPEGs 图片。JPEGsMini 会删除 JPEG 中所有不必要的图像数据，而不会有任何质量损失。根据图像的不同，您可以节省 5%到 100%以上。

您还应该考虑使用与设备屏幕尺寸相匹配的图像。在太小而无法显示的屏幕上加载一幅大而高分辨率的图像是没有意义的。在较小的屏幕上，加载适合该屏幕上的网站设计的较小图像。显示较小的图像也意味着加载较小的图像，这样可以节省带宽。

根据屏幕大小选择图像大小要求您的网站检测屏幕大小，然后决定在`<img>` `src`属性中引用什么图像。您可以使用 JavaScript 或 CSS 和媒体查询来实现这一点。几个响应式 web 框架也提供了响应式图像解决方案，所以如果您正在使用响应式框架，请检查它对响应式图像有什么特性。

## 优化 HTML

您可以缩小您的 HTML 文件，这意味着您删除所有不必要的字符(如空白)。缩小你的 HTML 将减少文件大小，从而减少下载时间和浏览器解析文件所需的时间。

你也许应该使用一个工具，从一组原始的 HTML 文件中创建一组缩小的 HTML 文件。缩小你的 HTML 文件会使它们变得很难阅读，因此很难操作。因此，更聪明的做法是保留未简化的 HTML 文件，然后在完成对原始文件的工作后创建一个简化的版本。

## 优化 CSS

你的网站的 CSS 样式应该在页面开始的时候加载，如果在第一次渲染页面的时候需要的话。将这些 CSS 文件加载到 HTML 代码的`<head>`元素中。CSS 样式加载得越快，浏览器就能越快开始呈现页面，访问者对网站的感觉也就越快。

有些 CSS 样式用在第一次渲染后加载的区域中。例如，如果您的页面通过 AJAX 加载数据，用于显示该数据的样式通常不会在页面的初始呈现过程中使用。因此，应该尽可能晚地加载这些 CSS 样式。

另一件事，你可以做的最大限度地减少下载你的 CSS 文件的时间是缩小你的 CSS 文件。缩小 CSS 文件意味着删除所有不必要的字符(如空白)。缩小一个 CSS 文件可以为你节省大量的字节。你可以使用像 http://cssminifier.com/这样的工具来缩小你的 CSS 文件。缩小一个 CSS 文件会使文件缩小 10-30%。这使得下载文件和浏览器解析文件的速度更快。

如果你有许多小的 CSS 文件，将它们合并成一个文件可能会加快下载速度。如果您使用 JSP 或 PHP 之类的服务器端脚本技术，您可以保留较小的 CSS 文件，然后使用您的脚本技术的文件包含特性将较小的文件包含在一个大文件中。然后你的网站会引用这个更大的文件。这样，您仍然可以在服务器上保持 CSS 文件的分离，而浏览器只能看到一个 CSS 文件。

## 优化 JavaScript

加速 JavaScript 文件下载的技术与 CSS 相同。

初始页面呈现所需的任何 JavasScript 都应该加载在`<head>` HTML 元素的开头。

初始页面呈现所需的任何不是的 JavaScript 都应该加载在 HTML 页面的底部，就在`</body>`标签之前。

您可以使用[http://jscompress.com/](http://jscompress.com/)来缩小您的 JavaScript(删除所有不必要的字符)。缩小 JavaScript 文件通常会减少 10-30%的文件大小。这使得下载文件更快，也使得浏览器解析文件更快。

您还可以将许多较小的 JavaScript 文件包含到服务器上的单个文件中，就像 CSS 文件一样。

## 允许缓存静态资源

您可以设置一些 HTTP 头，允许中间代理服务器缓存您的静态内容(CSS 文件，图像等)。).您将这些头添加到静态资源的 HTTP 响应中。这样，中间代理服务器可以缓存它们，以便更快地为用户服务。

如果你使用像 Google PageSpeed Insights 这样的页面优化工具(参见本文最后一节的链接)，你会被告知需要添加什么缓存 HTTP 头，以及添加到哪些文件。

## 使用 HTML5 应用程序缓存

您还可以使用 HTML5 应用程序缓存功能直接在浏览器中缓存文件。这样，您可以强制将文件缓存在浏览器中。

## 测量和优化页面速度的工具

以下是可以帮助您优化网页速度的工具列表:

*   [谷歌页面速度洞察](http://developers.google.com/speed/pagespeed/insights/)
*   [网页测试](http://www.webpagetest.org/)
*   [JPEG 图像](http://www.jpegmini.com/)
*   [综管系统](http://cssminifier.com/)
*   jscompress
# 企业服务总线(ESB)

> 原文:[https://jenkov.com/tutorials/soa/esb.html](https://jenkov.com/tutorials/soa/esb.html)

“企业服务总线”(ESB)是一个连接所有服务的系统。通过企业服务总线，还可以访问所有连接的服务。下面是一个企业服务总线的示例，它充当所有应用程序的中心“桥”或“网关”,公开其下的服务:

## ESB 基础

术语“总线”类似于计算机的内部总线，CPU、RAM 和其他芯片都连接到总线上。企业服务总线通常被实现为一个服务器或一组服务器，因此不仅仅是一个“网络”。

<center>

| ![An Enterprise Service Bus (ESB).](../Images/42cafdc6a15328ba5466d712bd88c88a.png) |
| **连接了应用程序(服务)的企业服务总线** |

</center>

连接到企业服务总线的客户端和服务不直接通信。它们通过 ESB 进行通信。这是通过让 ESB 向潜在的客户端公开相同的服务接口来实现的，连接的服务向 ESB 公开相同的服务接口。这种通过 ESB 的间接方式有一些优点和缺点，我将在本文的其余部分介绍这些优点和缺点。

## ESB 作为单一访问点

通过企业服务总线连接客户机和服务的一个优点是，客户机只需要在一个位置寻找服务:企业服务总线。如果服务从一个服务器移动到另一个服务器，您只需要重新配置 ESB。客户端仍然只是通过 ESB 访问服务。

## ESB 作为事务管理器

另一个优点是 ESB 可以协调多个服务参与的分布式事务。当多个分布式服务需要参与一个事务时，某个实体通常必须协调该事务。企业服务总线可以这样做，而不是强迫客户端这样做。即使协调参与者的工作是由 ESB 完成的，客户端可能仍然需要划分事务的开始和结束。

<center>

| ![An Enterprise Service Bus (ESB) as transaction manager.](../Images/1503954fa73fedd9c3ca56c144232212.png) |
| **企业服务总线(ESB)管理跨越三个服务的事务** |

</center>

## ESB 作为安全管理器

身份验证和授权等安全方面可以集中在企业服务总线中。即使应用程序中的服务没有身份验证和授权，企业服务总线也可以在其向潜在客户端公开的服务接口中要求这样做。

<center>

| ![An Enterprise Service Bus (ESB) as security manager.](../Images/faffbc4fd0fe6c0c841862805f42a886.png) |
| 在将服务请求转发给服务之前，企业服务总线(ESB)对客户端进行身份验证和授权。 |

</center>

## ESB 作为服务代理

ESB 可以充当不向外界公开标准化服务接口的应用程序的网关或代理。例如，假设一个应用程序公开了一个 Java RMI 服务。网络的其余部分正在运行。NET，它不能直接调用 RMI 服务。

要解决这个问题，您可以用 Java 实现一个服务代理，它可以调用 RMI 服务。然后，服务代理通过 ESB 向公开 web 服务接口(SOAP + WSDL)。NET 应用程序。

这种代理服务不一定是 ESB 的内置功能。它也可以作为单独的服务部署，通过 ESB 提供。

<center>

| ![An Enterprise Service Bus (ESB) as service proxy.](../Images/6cc090057cd20d21ece8682ca7d6eca7.png) |
| **企业服务总线(ESB)作为具有专有协议的服务的服务代理。** |

</center>

## ESB 作为通往世界的门户

如果一些客户端需要连接到外部世界中运行的服务，ESB 可以潜在地充当通向外部世界的网关。再次，安全方面等。可以添加到外部服务的顶部。此外，如果外部服务能够参与分布式事务，ESB 也可以对此进行协调。

<center>

| ![An Enterprise Service Bus (ESB) as gateway to the world.](../Images/a0e5116117336f09bbcac7c764f73145.png) |
| 作为通往世界的门户的企业服务总线(ESB)。 |

</center>

## ESB 的缺点

通过 ESB 连接服务也有一些缺点。首先，ESB 可能会成为单点故障。如果 ESB 关闭，客户端和服务之间就无法进行通信。其次，额外的间接级别可能会导致客户端-服务通信的性能下降。
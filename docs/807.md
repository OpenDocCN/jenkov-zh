# 对等寻址能力

> 原文:[https://jenkov.com/tutorials/p2p/peer-addressability.html](https://jenkov.com/tutorials/p2p/peer-addressability.html)

一旦对等网络中的对等体解决了[对等体连通性](peer-connectivity.html)挑战， 对等体需要一种相互寻址的方式，因此对等体可以精确地指定它希望 与网络中的哪个对等体通信。我称之为*对等寻址能力*挑战。

## 分配 GUIDs

对等体寻址能力通常是通过为网络中的每个对等体分配唯一的 GUID 来实现的。GUID 通常被设计成与给定 P2P 网络路由算法的所选路由表设计一起很好地工作。因此，不同的 P2P 路由算法具有不同的 GUID 和路由表结构，从而给出不同的特征。

例如，Chord 和 Kademlia 使用一个从 0 到 N 的数字作为 GUID，其中 N 是网络可以包含的对等点的最大数量。通常使用 64 位(8 字节)、128 位(16 字节)、160 位(20 字节)或 256 位(32 字节)的 GUID。

### 一维 GUIDs

当 GUID 由单个数字、单个坐标组成时，它本质上是一维 GUID。Chord、Kademlia、Pastry 和 Tapestry 都使用一维 GUID。下图显示了一个使用一维 GUID 的 P2P 网络示例:

![A P2P network using a one-dimensional GUID space](../Images/6d7e6143cdf25e8a11e51c5707487064.png)

### 多维 GUIDs

如果一个 GUID 由多个数字、多个坐标组成，那么这个 GUID 本质上就是多维的。Polymorph 的 P2P 路由算法使用一个 GUID 方案，其中 GUID 由多个数字-多个坐标组成。

多维 GUID 可以具有固定维度或动态维度。具有固定维数的 GUID 方案意味着所有 GUID 具有相同维数的 GUID 方案。具有动态维度的 GUID 方案意味着其中 GUID 不需要都具有相同数量的坐标的 GUID 方案。

Polymorph 的 P2P 路由算法之一使用具有动态维度的 GUID 方案。换句话说，对等体没有相同的位大小 GUID。下图显示了一个使用多维 GUID 方案的 P2P 网络示例:

![A P2P network using a multi-dimensional GUID space](../Images/6b42f81c4f42c358e3f8c44fa897a9e2.png)

## GUIDs 作为地址

GUID 的主要功能是作为一个地址。如果您知道您想要与之通信的对等体的 GUID，P2P 网络路由算法就可以找出如何在网络中找到该对等体——即使第一个对等体并不直接知道它想要与之通信的对等体的位置(IP 地址+端口)。

## 作为标识符的 GUIDs

默认情况下，对等 GUID 表示一个地址——网络中的一个位置——但不保证哪个计算机或个人位于该 GUID 地址。今天可能是一个人，明天可能是另一个人。

GUIDs 不仅可以用作地址，还可以用作标识符。例如，如果 GUID 963 总是属于同一个人或计算机，则 GUID 不再仅仅告知对等体位于网络中的何处，还告知 GUID 代表哪个身份。

## 从地址中分离身份

有时，一个人可能想从不同的位置加入 P2P 网络。例如，在家里、在工作中，以及在去另一个国家旅行时。

为了使 P2P 网络最佳地工作，网络可能更喜欢根据对等体的地理位置给予对等体不同的 GUIDs。然而，这意味着从不同地理位置加入 P2P 网络的人在从这些不同位置加入时将具有不同的 GUIDs。因此，GUID 不能再用作 ID，而只能用作地址。

为了解决这个问题，P2P 网络可以将用户或计算机的 ID 与其地址分开，并分配两个不同的 GUIDS 来表示身份和地址。因此，用户可以保持相同的身份 GUID，而与用户加入网络时获得的地址 GUID 无关(基于用户加入时计算机的地理位置)。因此，一个对等体可能同时拥有一个地址和一个身份 GUID(总共 2 个)。

如果 P2P 网络将对等体的身份与其地址分开，那么 P2P 网络可能需要一个函数来查找身份的地址，以便其他对等体可以找到要连接的地址，从而联系具有该身份的用户或计算机。
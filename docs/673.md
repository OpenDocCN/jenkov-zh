# Java switch 语句

> 原文：<https://jenkov.com/tutorials/java/switch.html>

一个 *Java* *switch* 语句使你能够根据某个变量的值选择一组要执行的语句。这实际上有点类似于一个 [Java if](if.html) 语句，尽管 Java *switch* 语句提供了一个更加压缩的语法，以及稍微不同的行为和可能性。在这篇 *Java switch 教程*中，我将解释最初的 Java *switch* 指令是如何工作的，以及对 switch 指令的修改，它能够打开 [Java 枚举](enums.html)、 [Java 字符串](strings.html)，最后是在 Java 12 中添加并在 Java 13 中改进的新的 *switch 表达式*语法。

## Java Switch 视频教程

如果你喜欢视频，我制作了两个视频来解释基本的 Java `switch`语句和 Java `switch`表达式。

<iframe width="560" height="315" src="https://www.youtube.com/embed/P9pZEZsLHmM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""><iframe width="560" height="315" src="https://www.youtube.com/embed/-vsd3IAD81U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""/> <h2>Java Switch 语句示例</h2> <p>让我们从一个 Java <code>switch</code>语句代码示例开始:</p> <pre class="codeBox"> int amount = 9; <b>switch</b>(amount) { <b>case</b> 0 : System.out.println("amount is 0"); break; <b>case</b> 5 : System.out.println("amount is 5"); break; <b>case</b> 10 : System.out.println("amount is 10"); break; <b>default</b> : System.out.println("amount is something else"); } </pre> <p>这个 switch 示例首先创建一个名为<code>amount</code>的变量，并将值<code>9</code>赋给它。</p> <p>其次，这个例子“打开”了变量<code>amount</code>的值。在<code>switch</code>语句中有 3 个<code>case</code>语句和一个<code>default</code>语句。</p> <p>每个<code>case</code>语句将<code>amount</code>变量的值与一个常量值进行比较。如果<code>amount</code>变量值等于常量值，则执行冒号(:)后的代码。注意每条语句后的<code>break</code>关键字。如果这里没有放置<code>break</code>关键字，执行可以继续沿着剩余的<code>case</code>语句，直到遇到<code>break</code>，或者到达<code>switch</code>语句的结尾。<code>break</code>关键字使执行跳出<code>switch</code>语句。</p> <p>如果没有<code>case</code>语句与<code>amount</code>变量的值匹配，则执行<code>default</code>语句。如果之前的<code>case</code>语句最后没有<code>break</code>命令，也可以执行<code>default</code>语句。不需要<code>default</code>语句。它是可选的。</p> <h2>等效的 if 语句</h2> <p>开头所示的 Java <em> switch </em>示例相当于下面一组<a href="if.html"> Java if 语句</a>:</p> <pre class="codeBox"> int amount = 9; if (amount == 0) { System.out.println("amount is 0"); } else if(amount == 5) { System.out.println("amount is 5"); } else if(amount == 10){ System.out.println("amount is 10"); } else { System.out.println("amount is something else"; } </pre> <p>虽然看起来几乎一样，但有些情况下使用 Java switch 语句更容易、更快。此外，Java 12 中添加的新的<em> Java switch 表达式</em>(见本教程后面的内容)使得 switch 语句可以实现一些 if 语句无法实现的结构。</p> <h2>打开参数</h2> <p>在本<em> Java switch 教程</em>开头所示的例子中，我们声明了一个<code>int</code>变量，并立即将 is 值设置为 9。在真实的 Java 应用程序中，您很可能不会这样做。相反，你可以打开一个方法的输入参数的值，或者打开一个通过网络从文件中读取的值。下面是一个打开方法参数的示例:</p> <pre class="codeBox"> private static void switchOnIntegers(int size) { switch(size) { case 0 : { System.out.println("size is small"); break; } case 1 : { System.out.println("size is medium"); break; } case 2 : { System.out.println("size is large"); break; } case 3 : { System.out.println("size is X-large"); break; } default : { System.out.println("size is not S,M,L or XL: " + size); } } } </pre> <h2>打开字节、短整型、字符、整型、字符串或枚举</h2> <p>如您所见，switch 语句切换变量。在 Java 7 之前，这个变量必须是数字，并且必须是<code>byte</code>、<code>short</code>、<code>char</code>或<code>int</code>。在 Java 7 中，变量也可以是一个<code>String</code>，也可以是一个<a href="enums.html"> Java enum </a>变量。在接下来的部分中，我将向您展示如何切换各种不同 Java 类型的例子。</p> <h3>打开字节、短整型</h3> <p>您可以打开 Java <code>byte</code>、<code>short</code>或<code>int</code>，如下例所示:</p> <pre class="codeBox"> private static void switchOnIntegers(byte size) { switch(size) { case 0 : { System.out.println("size is small"); break; } case 1 : { System.out.println("size is medium"); break; } case 2 : { System.out.println("size is large"); break; } case 3 : { System.out.println("size is X-large"); break; } default : { System.out.println("size is not S,M,L or XL: " + size); } } } </pre> <pre class="codeBox"> private static void switchOnIntegers(short size) { switch(size) { case 0 : { System.out.println("size is small"); break; } case 1 : { System.out.println("size is medium"); break; } case 2 : { System.out.println("size is large"); break; } case 3 : { System.out.println("size is X-large"); break; } default : { System.out.println("size is not S,M,L or XL: " + size); } } } </pre> <pre class="codeBox"> private static void switchOnIntegers(int size) { switch(size) { case 0 : { System.out.println("size is small"); break; } case 1 : { System.out.println("size is medium"); break; } case 2 : { System.out.println("size is large"); break; } case 3 : { System.out.println("size is X-large"); break; } default : { System.out.println("size is not S,M,L or XL: " + size); } } } </pre> <p>注意，以上例子之间唯一不同的是方法参数<code>size</code>的数据类型。其他都一样。</p> <h3>打开充电器</h3> <p>也可以打开 Java <code>char</code>值。下面是一个打开<code>char</code>参数的例子:</p> <pre class="codeBox"> private static void switchOnChars(char size) { switch(size) { case 'S' : { System.out.println("size is small"); break; } case 'M' : { System.out.println("size is medium"); break; } case 'L' : { System.out.println("size is large"); break; } case 'X' : { System.out.println("size is X-large"); break; } default : { System.out.println("size is not S,M,L or XL: " + size); } } } </pre> <h3>打开绳子</h3> <p>从 Java 7 开始，也可以在 Java 字符串上使用 switch。下面是一个 Java <em>开关</em>在<code>String</code>上的例子:</p> <pre class="codeBox"> private static void switchOnStrings(String size) { switch(size) { case "S" : { System.out.println("size is small"); break; } case "M" : { System.out.println("size is medium"); break; } case "L" : { System.out.println("size is large"); break; } case "XL" : { System.out.println("size is X-large"); break; } default : { System.out.println("size is not S,M,L or XL: " + size); } } } </pre> <h3>打开 Java 枚举</h3> <p>也可以打开一个<a href="enums.html"> Java enum </a>。下面是一个 Java 示例，它创建了一个 Java <code>enum</code>，然后在一个<em> switch </em>语句中使用它:</p> <pre class=""> public class SwitchOnEnum{ private static enum Size { SMALL, MEDIUM, LARGE, X_LARGE } private static void switchOnEnum(Size size) { switch(size) { case SMALL : { System.out.println("size is small"); break; } case MEDIUM : { System.out.println("size is medium"); break; } case LARGE : { System.out.println("size is large"); break; } case X_LARGE : { System.out.println("size is X-large"); break; } default : { default : { System.out.println("size is not S,M,L or XL: " + size); } } } } } </pre> <h2>同一操作的多个 case 语句</h2> <p>如果您希望对多个<code>case</code>语句执行相同的操作，您可以这样写:</p> <pre class="codeBox"> char key = '\t' switch(key) { case ' ' : case '\t' : System.out.println("white space char"); break; default : System.out.println("char is something else"); } </pre> <p>注意第一个<code>case</code>语句在冒号后没有任何操作。这样做的结果是，执行只是"<em>落到</em> <em>到</em>"下一个 case 语句(以及下一个等等)的操作。)直到遇到一个<code>break</code>为止。下一个<code>break</code>语句在第二个<code>case</code>语句之后。这意味着，对于第一个和第二个<code>case</code>语句，执行相同的操作——第二个<code>case</code>语句的操作。</p> <h3>每个 Case 语句有多个值</h3> <p>从 Java 13 开始，每个<code>case</code>语句也可以有多个值，而不是多个 case 语句一直到下一个。下面是上一节中的示例，该示例被改写为在单个<code>state</code>语句中使用多个值:</p> <pre class="codeBox"> char key = '\t' switch(key) { case ' ', '\t' : System.out.println("white space char"); break; default: System.out.println("char is something else"); } </pre> <p>注意第一个 case 语句的多个值是如何用逗号分隔的。</p> <h2>Java 开关表达式</h2> <p>Java 12 增加了<em>开关表达式</em>作为实验特性。一个<em> Java switch 表达式</em>一个可以返回值的 switch 语句。因此，它可以作为一个表达式来计算，就像其他 Java 表达式一样(也可以计算一个值)。在这一节中，我将向您展示 Java 12 的 Java 开关表达式是如何工作的。</p> <p>记住，我这里有本教程 Java <code>switch</code>表达式部分的视频版本:</p> <iframe width="560" height="315" src="https://www.youtube.com/embed/-vsd3IAD81U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""/> <p>这里首先是一个 Java 开关表达式的例子:</p> <pre class="codeBox"> int digitInDecimal = 12; char digitInHex = switch(digitInDecimal){ case 0 -&gt; '0'; case 1 -&gt; '1'; case 2 -&gt; '2'; case 3 -&gt; '3'; case 4 -&gt; '4'; case 5 -&gt; '5'; case 6 -&gt; '6'; case 7 -&gt; '7'; case 8 -&gt; '8'; case 9 -&gt; '9'; case 10 -&gt; 'A'; case 11 -&gt; 'B'; case 12 -&gt; 'C'; case 13 -&gt; 'D'; case 14 -&gt; 'E'; case 15 -&gt; 'F'; default -&gt; '?'; }; System.out.println(digitInHex); </pre> <p>这个 Java <code>switch</code>表达式示例将 0 到 15 之间的值转换为十六进制数字字符。</p> <p>注意每个<code>case</code>语句后面的冒号(<code>:</code>)是如何被一个<code>-&gt;</code>操作符替换的。这个操作符用在 switch 表达式中，向 Java 编译器发出信号，表明这个<code>case</code>语句选择了 switch 表达式的返回值，而不是选择要执行的代码块。</p> <p>还要注意，<code>case</code>语句后面没有<code>break</code>关键字。因为用<code>-&gt;</code>操作符选择的值被解释为开关表达式的返回值，所以每个语句后面的<code>break</code>是隐式的(实际上是不必要的)。您也可以将<code>-&gt;</code>视为一个<code>return</code>语句，它从 switch 表达式返回一个值，从而中断 switch 表达式的执行。</p> <p>最后，注意如何将<code>switch</code>表达式的返回值赋给<code>digitInHex</code>变量。这就是如何捕获 Java 开关表达式的输出。您也可以将其值作为方法的返回值返回，如下所示:</p> <pre class="codeBox"> public char toHexDigit(int digitInDecimal) { return switch(digitInDecimal){ case 0 -&gt; '0'; case 1 -&gt; '1'; case 2 -&gt; '2'; case 3 -&gt; '3'; case 4 -&gt; '4'; case 5 -&gt; '5'; case 6 -&gt; '6'; case 7 -&gt; '7'; case 8 -&gt; '8'; case 9 -&gt; '9'; case 10 -&gt; 'A'; case 11 -&gt; 'B'; case 12 -&gt; 'C'; case 13 -&gt; 'D'; case 14 -&gt; 'E'; case 15 -&gt; 'F'; default -&gt; '?'; }; } </pre> <p><em> Java 开关表达式</em>也适用于<a href="strings.html"> Java 字符串</a>值。下面是一个使用字符串打开的 Java 开关表达式示例:</p> <pre class="codeBox"> String token = "123"; int tokenType = switch(token) { case "123" -&gt; 0; case "abc" -&gt; 1; default -&gt; -1; }; </pre> <p>此示例基于字符串标记的值解析标记类型(整数值)。</p> <h3>Java 开关产出指令</h3> <p>在 Java 13 中，您可以使用 Java switch yield 指令从 Java switch 表达式中返回值，而不是使用箭头运算符(<code>-&gt;</code>)。下面是一个 Java switch yield 指令的例子:</p> <pre class="codeBox"> String token = "123"; int tokenType = switch(token) { case "123" : yield 0; case "abc" : yield 1; default : yield -1; }; </pre> <h3>切换表达式用例</h3> <p>Java 开关表达式在需要基于另一个值获取一个值的用例中非常有用。例如，在数值和字符之间进行转换时，如上例所示。</p> <p>Java 开关表达式在将字符解析为值，或者将字符串标记解析为整数标记类型时也很有用。一般来说，每当你需要将一个值转换成另一个值时。</p> </body> </html></iframe>
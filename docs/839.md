# 同步-上传

> 原文:[https://jenkov.com/tutorials/rsync/upload.html](https://jenkov.com/tutorials/rsync/upload.html)

RSync 发生在客户机和服务器之间，有两个方向:上传和下载。

在上传期间，客户端将文件的新版本上传到服务器。

在下载过程中，服务器保存文件的新版本，客户端保存旧版本。然后，客户端需要从服务器下载文件的新版本。如果不同的客户端已经将新版本上传到服务器，可能会出现这种情况。

在本文中，我将重点介绍上传。

## 上传过程

下图显示了 RSync 上传的过程。该图还显示了客户端和服务器内部的一些组件。有趣的是，在下载过程中(相反的过程)，相同的组件将会运行，但是在相反的计算机上。一旦你在本教程的下一篇文章中看到下载图，你就会明白。

该图按比例缩小。单击该图可获得大图。

<center>

| [![RSync: The upload process.](../Images/61eca3414544893d38efc7aa6d667b38.png)T2】](/images/rsync/upload-process.png) |
| RSync:上传过程。 |

</center>

以下是该流程的分解:

*   客户端向服务器发送要同步的文件的文件名。
*   服务器计算旧版本文件的校验和，并将它们返回给客户端。
*   客户端检测文件新旧版本之间的差异，并向服务器发送合并指令。
*   服务器将旧文件与新文件中检测到的差异合并，并发回一个 OK/FAIL 状态代码。